import os
from pathlib import Path

# base_dir = Path('/scratch/pavel/out/ap-defense-3-parallel/')
#
# victims = [
#     # ('1rrkm8fq', 'ops:10,exp:-1'), already done
#     ('x2j1joii', 'ops:10,exp:1'),
#     ('1kb1pw6q', 'ops:10,exp:2'),
#     ('13o7gmd6', 'ops:10,exp:4'),
#     ('p6awk5ox', 'ops:10,exp:8'),
#     ('2r6dv5lf', 'ops:20,exp:-1'),
#     ('3q9ym0u3', 'ops:20,exp:1'),
#     ('4sx6opvq', 'ops:20,exp:2'),
#     ('1xajoibu', 'ops:20,exp:4'),
#     ('pkkief88', 'ops:20,exp:8'),
#     # ('31o3gkmq', 'ops:30,exp:-1') not yet
# ]

base_dir = Path('/scratch/pavel/out/8-self-play/')

victims = ['2qjb9qso',
           '1vqsnfzs',
           '2nqomi4d',
           '28p7l83y',
           '3juxjbos',
           '3spmkqei',
           '26m8i5ur',
           '27bvd59k',
           '1k92hc8r',
           '27bg537a'
           ]

# victims = [  # Victims with 1 - 10 ops
#     ('34bhfiht', 'num_ops:1'),
#     ('3ndlf0hh', 'num_ops:2'),
#     ('z8mzc8i7', 'num_ops:3'),
#     ('180o3id2', 'num_ops:4'),
#     ('1sqawmrm', 'num_ops:5'),
#     ('2vkawngv', 'num_ops:6'),
#     ('2dxvknoi', 'num_ops:7'),
#     ('35m5i0ah', 'num_ops:8'),
#     ('3e3jlkux', 'num_ops:9'),
#     ('3gaggmls', 'num_ops:10'),
# ]
#
# victims = [
#     ('inxezlzy', 'num_ops:20'),
#     ('1o90ocy5', 'num_ops:30'),
#     ('3uszlvsa', 'num_ops:40'),
#     ('1gzlunju', 'num_ops:50'),
#     ('qatt5pq4', 'num_ops:60'),
#     ('wjzf97yz', 'num_ops:70'),
#     ('34gugs5t', 'num_ops:80'),
#     ('xihugnpd', 'num_ops:90'),
#     ('39pktlwz', 'num_ops:100'),
# ]

for folder in victims:
    os.system(f"python -m aprl_defense.train --wandb-project 8-self-play --alg ppo --mode finetune --adv-id 0 --victim-policy-name policy_1" +
              ' --override "{\\"num_sgd_iter\\":30}" --checkpoint-freq 150000 --max-timesteps 1500000'
              f' --victim-path {base_dir / folder} --description "{folder}-self-play"')
