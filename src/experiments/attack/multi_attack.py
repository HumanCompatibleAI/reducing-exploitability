import os
from pathlib import Path

# base_dir = Path('/scratch/pavel/out/ap-defense-3-parallel/')
#
# victims = [
#     # ('1rrkm8fq', 'ops:10,exp:-1'), already done
#     ('x2j1joii', 'ops:10,exp:1'),
#     ('1kb1pw6q', 'ops:10,exp:2'),
#     ('13o7gmd6', 'ops:10,exp:4'),
#     ('p6awk5ox', 'ops:10,exp:8'),
#     ('2r6dv5lf', 'ops:20,exp:-1'),
#     ('3q9ym0u3', 'ops:20,exp:1'),
#     ('4sx6opvq', 'ops:20,exp:2'),
#     ('1xajoibu', 'ops:20,exp:4'),
#     ('pkkief88', 'ops:20,exp:8'),
#     # ('31o3gkmq', 'ops:30,exp:-1') not yet
# ]

base_dir = Path('/scratch/pavel/out/4-single-trainer/')

victims = [
    ('15p558hm', '15p558hm'),
    ('1r8r959d', '1r8r959d'),
    ('22y2tws1', '22y2tws1'),
    ('24do54pp', '24do54pp'),
    ('28uxdcg0', '28uxdcg0'),
    ('2aomh96y', '2aomh96y'),
    ('2j4v07ov', '2j4v07ov'),
    ('2jlurq5o', '2jlurq5o'),
    ('3qehlktf', '3qehlktf'),
    ('fw8w3oq7', 'fw8w3oq7'),
]

for folder, description in victims:
    os.system(f"python -m train --wandb-project 4-single-trainer --alg ppo --mode finetune --adv-id 1 --victim-policy-name main" +
              ' --override "{\\"num_sgd_iter\\":4}" --checkpoint-freq 600000 --max-timesteps 6000000'
              f' --victim-path {base_dir / folder} --description "{folder},{description}"')
